<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ IP –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è–º–∏</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; }
        .container { max-width: 800px; margin: 0 auto; }
        .card { background: #f8f9fa; padding: 20px; border-radius: 10px; margin: 20px 0; }
        .status { padding: 10px; border-radius: 5px; margin: 10px 0; }
        .enabled { background: #d4edda; color: #155724; }
        .disabled { background: #f8d7da; color: #721c24; }
        table { width: 100%; border-collapse: collapse; }
        th, td { padding: 10px; border: 1px solid #ddd; text-align: left; }
        .form-group { margin: 15px 0; }
        input[type="text"] { padding: 8px; width: 300px; }
        button { padding: 8px 16px; background: #007bff; color: white; border: none; border-radius: 5px; cursor: pointer; }
        button:hover { background: #0056b3; }
        .danger { background: #dc3545; }
        .danger:hover { background: #c82333; }
    </style>
</head>
<body>
    <div class="container">
        <h1>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ IP –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è–º–∏</h1>
        
        <div class="card">
            <h2>–¢–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å</h2>
            <div class="status {% if is_enabled %}enabled{% else %}disabled{% endif %}">
                {% if is_enabled %}
                    üîí IP –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –í–ö–õ–Æ–ß–ï–ù–´
                {% else %}
                    üîì IP –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –í–´–ö–õ–Æ–ß–ï–ù–´ (–¥–æ—Å—Ç—É–ø –≤—Å–µ–º)
                {% endif %}
            </div>
            <p>–í–∞—à —Ç–µ–∫—É—â–∏–π IP: <strong>{{ current_ip }}</strong></p>
        </div>
        
        <div class="card">
            <h2>–†–∞–∑—Ä–µ—à–µ–Ω–Ω—ã–µ IP-–∞–¥—Ä–µ—Å–∞</h2>
            {% if allowed_ips %}
                <table>
                    <thead>
                        <tr>
                            <th>IP-–∞–¥—Ä–µ—Å</th>
                            <th>–î–µ–π—Å—Ç–≤–∏–µ</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for ip in allowed_ips %}
                        <tr>
                            <td>{{ ip }}</td>
                            <td>
                                <form method="POST" style="display: inline;">
                                    <input type="hidden" name="ip_to_remove" value="{{ ip }}">
                                    <button type="submit" name="action" value="remove_ip" class="danger">–£–¥–∞–ª–∏—Ç—å</button>
                                </form>
                            </td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
            {% else %}
                <p>–ù–µ—Ç —Ä–∞–∑—Ä–µ—à–µ–Ω–Ω—ã—Ö IP-–∞–¥—Ä–µ—Å–æ–≤</p>
            {% endif %}
        </div>
        
        <div class="card">
            <h2>–î–æ–±–∞–≤–∏—Ç—å IP-–∞–¥—Ä–µ—Å</h2>
            <form method="POST">
                <div class="form-group">
                    <label>IP-–∞–¥—Ä–µ—Å –∏–ª–∏ –ø–æ–¥—Å–µ—Ç—å (–Ω–∞–ø—Ä–∏–º–µ—Ä: 192.168.1.100 –∏–ª–∏ 192.168.1.0/24):</label><br>
                    <input type="text" name="new_ip" placeholder="192.168.1.100" required>
                </div>
                <button type="submit" name="action" value="add_ip">–î–æ–±–∞–≤–∏—Ç—å IP</button>
            </form>
        </div>
        
        <div class="card">
            <h2>–ë—ã—Å—Ç—Ä–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞</h2>
            <form method="POST">
                <div class="form-group">
                    <label>–í–∫–ª—é—á–∏—Ç—å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è —Å —ç—Ç–∏–º–∏ IP (—á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é):</label><br>
                    <input type="text" name="allowed_ips" 
                           placeholder="127.0.0.1,192.168.1.0/24,10.0.0.1"
                           style="width: 100%; max-width: 500px;">
                </div>
                <button type="submit" name="action" value="enable">–í–∫–ª—é—á–∏—Ç—å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è</button>
            </form>
            
            <form method="POST" style="margin-top: 20px;">
                <button type="submit" name="action" value="disable" class="danger">–í—ã–∫–ª—é—á–∏—Ç—å –≤—Å–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è (—Ä–∞–∑—Ä–µ—à–∏—Ç—å –≤—Å–µ–º)</button>
            </form>
        </div>
        
        <div class="card">
            <h2>–ü—Ä–∏–º–µ—Ä—ã —Ñ–æ—Ä–º–∞—Ç–æ–≤:</h2>
            <ul>
                <li><code>192.168.1.100</code> - –æ–¥–∏–Ω IP</li>
                <li><code>192.168.1.0/24</code> - –≤—Å—è –ø–æ–¥—Å–µ—Ç—å 192.168.1.0-255</li>
                <li><code>10.0.0.0/16</code> - –ø–æ–¥—Å–µ—Ç—å 10.0.0.0-10.0.255.255</li>
                <li><code>127.0.0.1,::1,192.168.1.0/24</code> - –Ω–µ—Å–∫–æ–ª—å–∫–æ —á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é</li>
            </ul>
        </div>
    </div>
</body>
</html>